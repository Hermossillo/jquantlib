<?xml version="1.0"?>


<!-- Needs code review -->


<ruleset name="Colt library rules">
	<description>Checks usage of Colt library</description>

	<rule name="ColtListsAndMaps" 
		  message="Avoid fastutil classes in method signatures. Use JCF interfaces instead." 
		  class="net.sourceforge.pmd.rules.XPathRule">
		<description>Avoid fastutil classes in method signatures.</description>
		<properties>
			<property name="xpath">
				<value>
<![CDATA[
//ClassOrInterfaceBodyDeclaration[
MethodDeclaration[@Public='true'] and 
MethodDeclaration/ResultType/Type/ReferenceType/ClassOrInterfaceType[
(@Image='RepositionableStream') 
or (@Image='LineTerminator')
or (@Image='TextIO')
or (@Image='MeasurableInputStream')
or (@Image='BinIO')
or (contains(@Image, 'BooleanCollection'))
or (contains(@Image, 'BooleanArray'))
or (contains(@Image, 'BooleanList'))
or (contains(@Image, 'BooleanSet'))
or (contains(@Image, 'BooleanIterator'))
or (contains(@Image, 'ByteCollection'))
or (contains(@Image, 'ByteArray'))
or (contains(@Image, 'ByteList'))
or (contains(@Image, 'ByteSets'))
or (contains(@Image, 'ByteIterator'))
or (contains(@Image, 'CharCollection'))
or (contains(@Image, 'CharArray'))
or (contains(@Image, 'CharList'))
or (contains(@Image, 'CharSet'))
or (contains(@Image, 'CharIterator'))
or (contains(@Image, 'DoubleCollection'))
or (contains(@Image, 'DoubleArray'))
or (contains(@Image, 'DoubleList'))
or (contains(@Image, 'DoubleSet'))
or (contains(@Image, 'DoubleIterator'))
or (contains(@Image, 'FloatCollection'))
or (contains(@Image, 'FloatArray'))
or (contains(@Image, 'FloatList'))
or (contains(@Image, 'FloatSet'))
or (contains(@Image, 'FloatIterator'))
or (contains(@Image, 'IntCollection'))
or (contains(@Image, 'IntArray'))
or (contains(@Image, 'IntList'))
or (contains(@Image, 'IntSet'))
or (contains(@Image, 'IntIterator'))
or (contains(@Image, 'LongCollection'))
or (contains(@Image, 'LongArray'))
or (contains(@Image, 'LongList'))
or (contains(@Image, 'LongSet'))
or (contains(@Image, 'LongIterator'))
or (contains(@Image, 'ObjectCollection'))
or (contains(@Image, 'ObjectArray'))
or (contains(@Image, 'ObjectList'))
or (contains(@Image, 'ObjectSet'))
or (contains(@Image, 'ObjectIterator'))
or (contains(@Image, 'ShortCollection'))
or (contains(@Image, 'ShortArray'))
or (contains(@Image, 'ShortList'))
or (contains(@Image, 'ShortSet'))
or (contains(@Image, 'ShortIterator'))
]]
]]>
				</value>
			</property>
		</properties>
		<example>
<![CDATA[
// 
// Fastutil classes should not be exposed directly on method signatures.
// JCF interfaces should be used instead.
// Doing so, users of JQuantLib are not obliged to adop fastutil but they are free to
// to use whatever JCF implementation they need to.
//
public calc1(DoubleArrayList list) { ... } // avoid!
public calc2(List list) { ... } // expose JCF interfaces instead
]]>
		</example>
	</rule>

	<!-- More rules can be added
	<rule> ... </rule> 
	 -->

</ruleset>
